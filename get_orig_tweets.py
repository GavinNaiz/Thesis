# -*- coding: utf-8 -*-

import tweepy
import json
import itertools

response_ids = []
auth_tweets = json.load(open('hash_neg_new.json'))
for k, v in auth_tweets.iteritems():
    response_ids.append(v['in_reply_to_status_id'])

consumer_key = 'ZSwIyb7gDtEv4h3j415u1Qng5'
consumer_secret = 'NuiQFevln0nC9JuEGBuhdoP4mketh4SxJ6wtg6TvqPi4eu0hBN'
access_token_key = '20521933-TF8iiSRLUOcA28Sss4969Hbm3bgmLXl5Oj75SqBOc'
access_token_secret = 'fKJAiMteJkeZgDEEQWmmdqTpvxo8yTqX5iFwPVwdYw06S'

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token_key, access_token_secret)
api = tweepy.API(auth)


bad_pos_ids = [716998782953500672, 717046462635356160, 716780683998466048, 716764498686844930, 716293681926381569, 716292745527070721, 716546476910845952, 717137286794579969, 716666089032314880, 717186182321295360, 716293681926381569, 717194667742347264, 716738029998776320, 716465188887728128, 716985045714644992, 716204765613580288, 717159830990036992, 717125720644984832, 717126384750108673, 716299267623755776, 716219278245146624, 716664150412304384, 716642525545627648, 716283988227276800]
bad_neg_ids = [717308356566720512, 717309111470268416, 717289240040615936, 717283189715283969, 715134699463712768, 717289031235739649, 717289339160498176, 717288256614707202, 717309977375993860, 717302040326709248, 717299602840399874, 717270912421093376, 717285124195295232, 717293197089636352, 717280696222490625, 717288999681961984, 717301928808488960, 717293164177072128, 717290042226413568, 717293119721447426, 717280899948224512, 717285226863575040, 717276391994236928, 717288870623064064, 717293009432260608, 717274874012639232, 717290988591394816, 717293357924360192, 717137913163558912, 717309986544680960, 717301503669747713, 717281035134885888, 717293097269522432, 717298091662163968, 717285348439666688, 717275891466788864, 717200190214524928, 717289055717867521, 717302068046798850, 717212366484672513, 717278402890215424, 717281264340840448, 717283354639380480, 717285291963199489, 717243845402972160, 717276287534891008, 717029913157439488, 717308745362108417, 717306256419983360, 717309864490348544, 717300899979345920, 717301421285056512, 717191694203097088, 717278153933193216, 717268696696115200, 717274303276978176, 717275869119643648, 717300879033032704, 716925637609402369, 717279971660677120, 717301888459386880, 717281011583746048, 717278933134090240, 717278570712809472, 717271810937602049, 717281123923927041, 717276574266105856, 717290935051096064, 717301869177999360, 717302119028621313, 717280403233476609, 717279441831858176, 717298229256130560, 717285330890534912, 717276180383027200, 717309935160266754, 717301661719334912, 717170545788211202, 717280695438147584, 717276393504002050, 717278153933193216, 717285176141750273, 717003881486557186, 717283414613692416, 717309512382865408, 717306840653172736, 717307031443652608, 717280454597066752, 717255119918731264, 717285151328210944, 717284438590095361, 717293022052913152]
for idee in bad_neg_ids:
    if idee in response_ids:
        response_ids.remove(idee)

print len(response_ids)
response_ids = response_ids[1260:1440]

def paginate(iterable, page_size):
    while True:
        i1, i2 = itertools.tee(iterable)
        iterable, page = (itertools.islice(i1, page_size, None),
                list(itertools.islice(i2, page_size)))
        if len(page) == 0:
            break
        yield page


orig_tweets = {}

index = 0
for page in paginate(response_ids, 1):
    print page[0]
    result = api.get_status(page[0])._json
    index += 1
    orig_tweets[page[0]] = result
    print result
    print index
    print " "
    print " "


print len(orig_tweets)

with open('origs7_hash_neg.json', 'w') as outfile:
    json.dump(orig_tweets, outfile)
